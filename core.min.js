"use strict";function adicat(t){if("string"!=typeof t)throw new TypeError("argument must be a string");this.string={raw:t,clean:"",striped:""},this.chars=t.length,this._processLevel=0,this._processTime={meta:-1,token:-1,cue:-1,cat:-1,display:-1}}function adicat_readDict(t,e){var s,r,i,a=e?" ":"^",n=e?" ":"$",h=/^\^|\$$/g,o=e?/ *\* */g:/\^*\*\$*/g,c=e?"g":"",p=/(^|[^\\])[[(]/,l=/(^|[^\\])[)\]]/;for(r in t)if(t.hasOwnProperty(r)&&!t[r].test){for(s||(s={}),s[r]=[],i="string"==typeof t[r]?0:t[r].length;i--;)p.test(t[r][i])+l.test(t[r][i])===1&&(t[r][i]=t[r][i].replace(patterns.special,"\\$&")),s[r][i]=(a+t[r][i].replace(h,"")+n).replace(o,"");s[r]=new RegExp(s[r].join("|"),c)}return patterns.dict_proc=!0,s}function adicat_loadDict(t){var e=new XMLHttpRequest;e.onreadystatechange=function(){4===e.readyState&&200===e.status&&(patterns.dict=/^%/.test(e.resonseTest)?read_dic(e.resonseTest):JSON.parse(e.responseText))},e.open("GET",t,!0),e.send()}function read_dic(t){var e,s,r,i,a=t.replace(/[\r\n]+/g,"\n").split(/%[^\n]*\n/),n=a.splice(2)[0],h={c:[],i:[]},o={},c={ch:/^[^\d]+|[\t\r\n ]+$/g,cb:/^[\t\r\n ]+|[^\d]+$/g,tr:/\t+/,nd:/[^\d]+/g},p=0;for(a=a[1].match(/\d+[\t ]+[^\n]+/g),s=a.length;p<s;p++)r=a[p].replace(c.ch,"").split(c.tr),i=r[0].replace(c.nd,""),o[r[1]]=[],h.c.push(r[1]),h.i.push(i);for(n=n.split("\n"),p=n.length;p--;)for(i=n[p].replace(c.cb,"").split(c.tr),r=i.splice(1),i=i[0],a=r.length;a--;)-1!==(e=h.i.indexOf(r[a]))&&o[h.c[e]].push(i);return o}function write_dic(t){var e,s,r=1,i=["%"],a={};for(e in t)if(t.hasOwnProperty(e)){for(i.push(r+"\t"+e),s=t[e].length;s--;)a.hasOwnProperty(t[e][s])?a[t[e][s]].push(r):a[t[e][s]]=[r];r++}i.push("%");for(e in a)a.hasOwnProperty(e)&&i.push(e+"\t"+a[e].join("\t"));return i.join("\n")}function rand(t,e){return(e=e||0)+Math.floor(Math.random()*t+e)}function which(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return e;return!1}function empty(t){return""!==t}function addEvent(t,e,s){t.addEventListener?t.addEventListener(e,function(t){s(t)},!1):t.attachEvent("on"+e,function(t){s(t)},!1)}function bench(t,e){for(st=(new Date).getTime();t--;)e.call();return(new Date).getTime()-st}var patterns={word_breaks:/\s/g,char:/[A-z0-9?><!@#$%^&*()_+|}{":;}'\/.,-=\\\][\]]/,special:/[[\]()\/\\.?$*^]/g,striped:/[^a-z0-9'\s]/g,filter:/[$#%^*\r\n\t\-~\\—–→\+=[\/({})\]]|\s"(?!\w)|\s\s/g,curly_quote:{s:/[‘’]/g,d:/[“”]/g},emojis:{smile:/\:\)|\:\s\)|\:\-\)/g,smile_rev:/emjhface/g,frown:/\:\(|\:\s\(|\:\-\(/g,frown_rev:/emjsface/g},symbols:{and:/\&/g,at:/\@/g},punct:{initials:/[,.](?=\w+[.,])/g,apostrophe:/\.\'s/g,ellipses:/…|\.{3,}|\. +\. +[. ]+/g},space:/\s(?=[\s.,?!)}>\]])|^\s|\s$/g,returns:/[\r\n]/g,boundary:{sentence:/[?!.:]+\s*/g,clause:/[.,:;?!(\)<>{}[\]]+\s*/g},cues:{question:/\?|\sw+h+a+[t\s]*\s|\sw+h+e+n+\s|\sw+h+o+\s|\show|\sa+[sk]{2}\s|\sh+u+h/,greeting:/\sh+i+[yi]*\s|\sh+[ae]+[iy]+\s|\sh+e+l+o+\s|\sy+o+\s|\sw+h+a+t+[']*(?:s|\sis)\s(?:shak|up)/,yes:/\sy+[ae]+s+\s|\sy+e+a+h+\s|\ss+u+r+[e\s]+|\su+h+u[hu\s]+\s|\sa+f+i+r+m|\sa+cc+e+p/,no:/\sn+o+\s|\sn+o+p+e+\s|\sd+e+c+l+i|\sr+e+j+e+c/,sad:/\semjsface\s|\sb+a+d+\s|\ss+a+d+\s|\sf+r+u+s+t+r|\sd+e+p+r+e+s|\st+e+r+i+b+l|\sh+o+r+i+b+l/,happy:/\semjhface\s|\sh+a+p+y+\s|\se+x+c+i+t|\sg+oo+d+\s|\sg+r+e+a+t+\s|\se+x+c+e+l+e+n+t|\ss+u+pe+r+\s|\sn+i+c+e+\s/},matches:{},dict:null,dict_proc:!1},liwc_means={overall:{ppron:9.95,ipron:5.26,article:6.51,auxverb:8.53,adverb:5.27,prep:12.93,conj:5.9,negate:1.66,quant:2.02},blogs:{ppron:10.66,ipron:5.53,article:6,auxverb:8.75,adverb:5.88,prep:12.6,conj:6.43,negate:1.81,quant:2.27},expressive:{ppron:12.74,ipron:5.28,article:5.7,auxverb:9.25,adverb:6.02,prep:14.27,conj:7.46,negate:1.69,quant:2.35},novels:{ppron:10.35,ipron:4.79,article:8.35,auxverb:7.77,adverb:4.17,prep:14.27,conj:6.28,negate:1.68,quant:1.8},natural:{ppron:13.37,ipron:7.53,article:4.34,auxverb:12.03,adverb:7.67,prep:10.29,conj:6.21,negate:2.24,quant:1.93},nytimes:{ppron:3.56,ipron:3.84,article:9.08,auxverb:5.11,adverb:2.76,prep:14.27,conj:4.85,negate:.62,quant:1.94},twitter:{ppron:9.02,ipron:4.6,article:5.58,auxverb:8.27,adverb:5.13,prep:11.88,conj:4.19,negate:1.74,quant:1.85}};adicat.prototype={constructor:adicat,tokenize:function(){var t=(new Date).getTime();if(this.string.clean=this.string.raw.replace(patterns.word_breaks," ").replace(patterns.curly_quote.s,"'").replace(patterns.curly_quote.d,'"').replace(patterns.emojis.smile," emjhface ").replace(patterns.emojis.frown," emjsface ").replace(patterns.symbols.and," and ").replace(patterns.symbols.at," at ").replace(patterns.punct.apostrophe,"'s").replace(patterns.punct.ellipses,"... ").replace(patterns.space,""),this.string.striped=this.string.clean.toLowerCase().replace(patterns.striped,""),this.words={token:this.string.striped.split(patterns.word_breaks),print:this.string.clean.replace(patterns.emojis.smile_rev,":)").replace(patterns.emojis.frown_rev,":(").split(patterns.word_breaks)},this.WC=this.words.token.length,this.WC!==this.words.print.length){if(this._processLevel)throw"InputError: the input text is not parsing properly; check for special characters";return this._processLevel=.5,this.string.raw=this.string.raw.replace(/[^A-z0-9?!'",.-;:[({})\]]/g," "),this.tokenize()}return this.string.striped=" "+this.string.striped+" ",this._processLevel=1,this._processTime.token=(new Date).getTime()-t,this},categorize:function(t,e){if(e=e||[],this._processLevel||this.tokenize(),t){for(var s in t)if(t.hasOwnProperty(s)){if(t[s].test)break;t=adicat_readDict(t);break}}else patterns.dict_proc||(patterns.dict=adicat_readDict(patterns.dict)),t=patterns.dict;var r,i,a,n,s,h,o=0,c=(new Date).getTime();for(this.words.categories=[],this.cats={},this.cats_type=this.captured=0,o=this.WC;o--;)if(n=this.words.token[o],patterns.matches.hasOwnProperty(n)){for(a=patterns.matches[n],r=a.length;r--;)i=a[r],-1===e.indexOf(i)&&(this.cats[i]=this.cats.hasOwnProperty(i)?this.cats[i]+1:1);this.words.categories[o]=" "+a.join(" ")+" ",this.captured+=1}else{h=!1;for(s in t)t.hasOwnProperty(s)&&-1===e.indexOf(s)&&(this.cats.hasOwnProperty(s)||(this.cats[s]=0),t[s].test(n)&&(patterns.matches[n]||(patterns.matches[n]=[]),this.cats[s]+=1,patterns.matches[n].push(s),h=!0));this.words.categories[o]=patterns.matches[n]?" "+patterns.matches[n].join(" ")+" ":" none ",h&&(this.captured+=1)}return this._processLevel=2,this._processTime.cat=(new Date).getTime()-c,this},toPercent:function(t){if(this.hasOwnProperty("cats")||this.categorize(),!this.cats_type){this.cats_type=1;for(var e in this.cats)this.cats.hasOwnProperty(e)&&(this.cats[e]=this.cats[e]/this.WC*100,t&&(this.cats[e]=Math.round(100*this.cats[e])/100))}return this.cats},detect:function(t){t=t||patterns.cues,this._processLevel||this.tokenize();var e,s=(new Date).getTime();this.cues={};for(e in t)t.hasOwnProperty(e)&&(this.cues[e]=t[e].test(this.string.striped)||t[e].test(this.string.raw));return this._processTime.cue=(new Date).getTime()-s,this},display:function(t,e){var s,r=(new Date).getTime(),i=0,a=/^ | $/g,n=/ /g,h="";for(this._processLevel<2&&this.categorize(),this.html=[];i<this.WC;i++)h=" "===this.words.categories[i]?" none ":this.words.categories[i],this.html[i]=document.createElement("span"),this.html[i].className=h,this.html[i].title=h.replace(a,"").replace(n,", "),this.html[i].innerText=this.words.print[i];return t&&(s=e?function(t,e){return t.className>e.className?1:-1}:function(t,e){return t.innerText.toUpperCase()>e.innerText.toUpperCase()?1:-1},this.html=this.html.sort(s)),this._processTime.display=(new Date).getTime()-r,this.html},meta:function(){var t,e=(new Date).getTime(),s=0,r={period:/\./g,comma:/,/g,qmark:/\?/g,exclam:/\!/g,quotes:/['"]/g,brackets:/[(\){}<>[\]]/g,organization:/[-—–\/:;]/g};for(this._processLevel||this.tokenize(),this.meta={period:0,comma:0,qmark:0,exclam:0,quotes:0,brackets:0,organization:0,sentences:0,WPS:0,clauses:0,WPC:0},this.meta.sentences=this.string.clean.split(patterns.boundary.sentence).filter(empty),s=this.meta.sentences.length;s--;)this.meta.WPS+=this.meta.sentences[s].split(patterns.word_breaks).filter(empty).length;for(this.meta.sentences=this.meta.sentences.length,this.meta.WPS=this.meta.WPS/this.meta.sentences,this.meta.clauses=this.string.clean.split(patterns.boundary.clause).filter(empty),s=this.meta.clauses.length;s--;)this.meta.WPC+=this.meta.clauses[s].split(patterns.word_breaks).filter(empty).length;this.meta.clauses=this.meta.clauses.length,this.meta.WPC=this.meta.WPC/this.meta.clauses;for(t in r)r.hasOwnProperty(t)&&(this.meta[t]=this.string.clean.match(r[t]),this.meta[t]=this.meta[t]?this.meta[t].length:0);return this._processTime.meta=(new Date).getTime()-e,this},similarity:function(t,e,s){if(s=s||["ppron","ipron","article","adverb","conj","prep","auxverb","negate","quant"],this.sim=0,t&&"string"!=typeof t){if(t.hasOwnProperty("cats"))t.cats_type||t.toPercent(),t=t.cats;else if(!t.hasOwnProperty(s[0]))return this.sim}else t=t&&!liwc_means.hasOwnProperty(t)?new adicat(t).categorize().toPercent():liwc_means[t||"overall"];this.hasOwnProperty("cats")||this.categorize(),this.cats_type||this.toPercent();var r=s.length,i=0,a="",n=e&&/^co/i.test(e);for(n&&(this.sim=[0,0,0]);r--;)a=s[r],this.cats.hasOwnProperty(a)&&this.cats[a]+t[a]&&(i++,n?(this.sim[0]+=this.cats[a]*t[a],this.sim[1]+=this.cats[a]*this.cats[a],this.sim[2]+=t[a]*t[a]):this.sim+=Math.abs(this.cats[a]-t[a])/(this.cats[a]+t[a]));return this.sim=n?Math.round(this.sim[0]/Math.sqrt(this.sim[1])/Math.sqrt(this.sim[2])*1e3)/1e3:Math.round(1e3*(1-this.sim/i))/1e3,isNaN(this.sim)&&(this.sim=0),this.sim}},Array.prototype.sample=function(t){var e=this.length,s=[],r=[],i=0,a=0;if(!t||1===t)return this[rand(e)];for(t=Math.min(t,e);i<t;)-1===s.indexOf(a=rand(e))&&(s[i]=a,r[i]=this[a],i++);return r},Array.prototype.unique=function(){for(var t=this.length,e=i=0,s=[];e<t;e++)-1===s.indexOf(this[e])&&(s[i]=this[e],i++);return s},Array.prototype.grepl=function(t){var e=this.length,s=[];if(this[0].test)for(;e--;)s[e]=this[e].test(t);else{if(!this[0].search)throw new TypeError("the first value does not have a search or test function");for(;e--;)s[e]=-1!==this[e].search(t)}return s},Array.prototype.nmatch=function(t){var e=this.length,s=0;if(this[0].test)for(;e--;)s+=this[e].test(t);else{if(!this[0].search)throw new TypeError("the first value does not have a search or test function");for(;e--;)s+=-1!==this[e].search(t)}return s},Array.prototype.sum=function(){for(var t=this.length,e=0;t--;)e+=this[t];return e},Array.prototype.indexOf||(Array.prototype.indexOf=function(t){for(var e=this.length;e--;)if(t==this[e])return e;return-1});