"use strict";Adicat.chat={indStat:!1,log:{s:"",r:""},parts:{frame:document.createElement("div"),log:document.createElement("div"),indicator:document.createElement("p"),input:document.createElement("div")},replies:{},parse:function(t){Adicat.chat.log={s:"",r:""},t=t.replace(/[\r\n]/g,"").split("");for(var a=t.length,e=0,c={},i="",n="",r=/^ *\[/,d=[/\['/,/['"],['"]/g,/']/];e<a;){if("("===t[e]){for(i="",e++;")"!==t[e];)i+=t[e],e++;for(;"{"!==t[e];)e++;for(n="",e++;"}"!==t[e];)n+=t[e],e++;c[i]=r.test(n)?JSON.parse(n.replace(d[0],'["').replace(d[1],'","').replace(d[2],'"]')):[n]}e++}return c},send:function(t){t=t||Adicat.chat.parts.input.value;var a=document.createElement("div"),e=document.createElement("p");a.className="outgoing",a.appendChild(e),e.innerText=t,Adicat.chat.append(a),Adicat.chat.receive(t),Adicat.chat.parts.input.value="",Adicat.chat.parts.input.focus()},receive:function(t,a){var e,c,i=document.createElement("div"),n=document.createElement("p"),r=new adicat(t).detect();i.className="incoming",i.appendChild(n),e=Adicat.which(r.cues),e=r.string.clean===Adicat.chat.log.s?"repeat":Adicat.chat.replies.hasOwnProperty(e)?e:"general",Adicat.chat.replies[e]||(Adicat.chat.replies[e]=[""]),c=a||Adicat.chat.replies[e].sample(),n.innerText=c===Adicat.chat.log.s?Adicat.chat.replies[e].sample():c,Adicat.chat.log={s:n.innerText,r:r.string.clean},""!==n.innerText&&setTimeout(function(){Adicat.chat.typing(i)},Adicat.rand(20,1)*t.length)},typing:function(t){Adicat.chat.indStat||(Adicat.chat.indStat=!0,Adicat.chat.parts.indicator.style.display="",setTimeout(function(){Adicat.chat.parts.indicator.style.display="none",Adicat.chat.append(t),Adicat.chat.indStat=!1},Adicat.rand(20,10)*t.innerText.length*10))},append:function(t){Adicat.chat.parts.log.appendChild(t),""===Adicat.chat.parts.log.style.position&&Adicat.chat.parts.log.scrollHeight>Adicat.chat.parts.frame.scrollHeight&&(Adicat.chat.parts.log.style.position="relative"),Adicat.chat.parts.frame.scrollTop=Adicat.chat.parts.frame.scrollHeight}};