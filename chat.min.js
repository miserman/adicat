function adicat_parse(e){log={s:"",r:""},e=e.replace(/[\r\n]/g,"").split("");for(var t=e.length,n=0,i={},a=b="",r=/^ *\[/,l=[/\['/,/['"],['"]/g,/']/];n<t;){if("("===e[n]){for(a="",n++;")"!==e[n];)a+=e[n],n++;for(;"{"!==e[n];)n++;for(b="",n++;"}"!==e[n];)b+=e[n],n++;i[a]=r.test(b)?JSON.parse(b.replace(l[0],'["').replace(l[1],'","').replace(l[2],'"]')):[b]}n++}return i}function send(e){var t=document.createElement("div"),n=document.createElement("p");t.className="outgoing",t.appendChild(n),n.innerText=e,append(t),receive(e)}function receive(e,t){var n,i,a=document.createElement("div"),r=document.createElement("p");a.className="incoming",a.appendChild(r),c=new adicat(e).detect(),n=which(c.cues),n=c.string.clean===log.s?"repeat":replies.hasOwnProperty(n)?n:"general",replies[n]||(replies[n]=[""]),i=t||replies[n].sample(),r.innerText=i===log.s?replies[n].sample():i,log={s:r.innerText,r:c.string.clean},""!==r.innerText&&setTimeout(function(){typing(a)},rand(.5,.1)*e.length*100)}function typing(e){indStat||(indStat=!0,indicator.style.display="",setTimeout(function(){indicator.style.display="none",append(e),indStat=!1},rand(2,.2)*e.innerText.length*100))}function append(e){chat.appendChild(e),""===chat.style.position&&chat.scrollHeight>chat_body.scrollHeight&&(chat.style.position="relative"),chat.lastElementChild.scrollIntoView()}var indStat=!1,log={s:"",r:""};